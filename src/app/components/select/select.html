<app-popover
  [offsetY]="'bottom'"
  [offsetX]="'left'"
  [buttonStyle]="'outline'"
  [style.--background-color]="'transparent'"
  [disabled]="disabled"
  #popover
>
  <div class="trigger select-trigger" appResize (resizeEl)="updateTriggerWidth($event.width)">
    {{ value || "Select a item" }}
    <ion-icon name="chevron-down-outline" />
  </div>
  <div class="options-wrapper">
    <span class="scroll-indicator">
      @if (showTopArrow()) {
      <ion-icon name="chevron-up-outline" />
      }
    </span>
    <div class="options">
      @for (option of options; track option.id; let idx = $index, c = $count) {
      <app-button
        [style]="'ghost'"
        [full]="true"
        [size]="'lg'"
        [style.--btn-max-height]="'34px'"
        [style.--btn-justify]="'flex-start'"
        [style.--btn-bg-color]="option.value === value ? 'var(--clr-surface-a10)' : ''"
        appVisibility
        [monitorVisible]="idx === 0 || idx === c - 1"
        (visibleChange)="showingOption(idx, $event)"
        (click)="setValue(option)"
      >
        <span class="option">
          <span>
            @if (option.icon) {
            <ion-icon [name]="option.icon" />
            } {{ option.label }}
          </span>

          @if (option.value === value) {
          <ion-icon name="checkmark-outline" />
          }
        </span>
      </app-button>
      } @empty {
      <div class="empty">No options</div>
      }
    </div>
    <span class="scroll-indicator">
      @if (showBottomArrow()) {
      <ion-icon name="chevron-down-outline" />
      }
    </span>
  </div>
</app-popover>
